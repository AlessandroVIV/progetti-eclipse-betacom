package com.betacom.jpa.process;

import java.time.LocalDate;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.betacom.jpa.dto.SocioDTO;
import com.betacom.jpa.repositories.ICertificatoRepository;
import com.betacom.jpa.services.interfaces.ICertificatoServices;
import com.betacom.jpa.services.interfaces.ISocioServices;

import lombok.extern.log4j.Log4j2;

@Log4j2
@Component
public class MainProcess {

    private final ICertificatoRepository ICertificatoRepository;

	@Autowired
	private ISocioServices socioServices;
	
	@Autowired
	private ICertificatoServices certificatoServices;

    MainProcess(ICertificatoRepository ICertificatoRepository) {
        this.ICertificatoRepository = ICertificatoRepository;
    }
	
	public void execute() {
		
		/*
		try {
		
			SocioReq r = new SocioReq();
		
			r.setNome("Paolo");
			r.setCognome("Rossi");
			r.setCodiceFiscale("RSSMRA85M01H501Z");
			r.setEmail("p.rossi@gmail.com");
		
			int socioId = socioServices.insert(r);
			
			CertificatoRequest certificatoRequest = new CertificatoRequest();
			
			certificatoRequest.setDataCertificato(LocalDate.parse("2025-01-02"));
			certificatoRequest.setSocioId(socioId);
			certificatoRequest.setTipo(false);
			
			certificatoServices.create(certificatoRequest);
			
		} catch (AcademyException e) {
			log.error(e.getMessage());
		}
		
		log.debug("Fine insert!");
	}
	*/
		
		List<SocioDTO> lS = socioServices.listAll();
		lS.forEach(s -> log.debug(s.toString()));
		
	}
}
