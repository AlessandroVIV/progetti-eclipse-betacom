package com.betacom.car.process;

import java.io.BufferedReader;
import java.io.FileReader;
import java.util.ArrayList;
import java.util.List;

public class FileProcess {
    
    private final VeicoliProcess process = new VeicoliProcess();

    // Metodo per leggere il file e restituire le righe valide
    public List<String> leggiFile(String path) throws Exception {
        List<String> lines = new ArrayList<>();
        
        try (BufferedReader br = new BufferedReader(new FileReader(path))) {
            String line;
            while ((line = br.readLine()) != null) {
                line = line.trim();
                if (!line.isEmpty() && !line.startsWith("#")) {
                    lines.add(line);
                }
            }
        }

        return lines;
    }

    // Metodo per processare solo le righe "add:"
    public void processAddOnly(List<String> lines) {
        for (String line : lines) {
            if (line.startsWith("add:")) {
                process.handleAdd(line.substring(4)); // rimuovi "add:" e passa il contenuto
            } else {
                System.out.println("⚠️ Riga ignorata (non è un add): " + line);
            }
        }
    }
}
